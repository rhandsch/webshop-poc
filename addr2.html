<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Webshop Responsive Proof-Of-Concept - Addr2</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/jquery.qtip-2.1.1.min.css" rel="stylesheet">
    <link href="css/webshop-poc.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style>
        form.address div.colFirst {
            padding-left: 2px;
            padding-right: 2px;
        }
        form.address div.colMiddle {
            padding-left: 2px;
            padding-right: 2px;
        }
        form.address div.colLast {
            padding-left: 2px;
            padding-right: 2px;
        }
        form.address div.colHelp span {
            margin-top: 6px;
        }

    </style>
</head>
<body>
<h1>Address Demo #2</h1>
<small class="pull-right">Rev 1</small>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-7">
            <form class="form-horizontal address" role="form">
                <div class="form-group">
                    <label for="zip" class="col-sm-3 control-label">Zip, City</label>

                    <div class="col-sm-2 colFirst">
                        <input type="text" class="form-control input-sm zip" id="zip" placeholder="PLZ"
                        data-helpText="Bitte geben Sie mindestens 2 Zahlen ein um eine Postleitzahl auszuwählen">
                    </div>
                    <div class="col-sm-6 colLast">
                        <input type="text" class="form-control input-sm city" id="city" placeholder="Stadt"
                               data-helpText="Bitte geben Sie eine Stadt ein oder wählen Sie aus der Liste aus">
                    </div>
                    <div class="col-sm-1 colHelp">
                        <a href="javascript:void(0)" class="activateHelpLink" data-helpSelector="#zip, #city">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </a>
                    </div>
                </div>
                <div class="form-group">
                    <label for="street" class="col-sm-3 control-label">Straße</label>

                    <div class="col-sm-8 colFirst">
                        <input type="text" class="form-control input-sm" id="street" placeholder="Straße"
                               data-helpText="Bitte geben Sie mindestens einen Buchstaben ein um aus einer Liste von Straßen zu wählen">
                    </div>
                    <div class="col-sm-1 colHelp">
                        <a href="javascript:void(0)" class="activateHelpLink" data-helpSelector="#street">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </a>
                    </div>
                </div>
                <div class="form-group">
                    <label for="house" class="col-sm-3 control-label">Hausnr., Stiege, Tür</label>

                    <div class="col-sm-2 colFirst">
                        <input type="text" class="form-control input-sm" id="house" placeholder="Nr.">
                    </div>
                    <div class="col-sm-3 colMiddle">
                        <input type="text" class="form-control input-sm" id="entrance" placeholder="Stiege">
                    </div>
                    <div class="col-sm-2 colLast">
                        <input type="text" class="form-control input-sm" id="door" placeholder="Tür">
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-offset-3 col-sm-9 colFirst">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox"> Checkbox one
                            </label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-3 col-sm-9 colFirst">
                        <button type="button" id="fillAndValidate" class="btn btn-default">Fill and validate</button>
                    </div>
                </div>
            </form>

        </div>
        <div class="col-sm-5">
            <p>Order Info Basket</p>
        </div>

    </div>
</div>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.qtip-2.1.1.min.js"></script>

<script>
    /* Apply qtip for error messages. Re-apply after ajax element replacements. */
    function applyQTip() {
        $('.qtip').remove();
        $('.has-error[data-errorMessage!=""]').each(function() {
            $(this).qtip({
                id: $(this).attr("id"),
                content: {
                    attr: 'data-errorMessage'
                },
                position: {
                    my: "bottom left",
                    at: "top center"
                },
                show: {
                    ready: true
                },
                hide: {
                    event: 'unfocus'
                },
                style: {
                    classes: 'qtip-red qtip-rounded qtip-shadow'
                }
            });
        });
    }
    function fillAndValidate() {
        $("#zip").val("2331").parent().addClass("has-success");
        $("#city").val("Xxx").parent().addClass("has-error").attr("data-errorMessage", "Stadt ungültig");
        $("#street").val("Yyyy").parent().addClass("has-error").attr("data-errorMessage", "Straße ungültig asdf asdf sadf asd fasd f adsf asd fasd fads fadsf dsaf ");
        $("#house").val("-11").parent().addClass("has-error").attr("data-errorMessage", "Hausnummer ungültig");
        $("#entrance").val("-22").parent().addClass("has-error").attr("data-errorMessage", "Stiege ungültig");
        applyQTip();
    }
    function activateHelp(ev) {
        var helpSelector = $(this).attr("data-helpSelector");
        //var helpInputs = $('input[data-helpText]');
        var helpInputs = $(helpSelector);
        console.debug("activateHelp inputs:", helpInputs);
        helpInputs.each(function() {
            $(this).qtip({
                id: $(this).attr("id") + "-help",
                content: {
                    attr: 'data-helpText'
                },
                position: {
                    my: "bottom left",
                    at: "top left",
                    adjust: { x: 10 }
                },
                show: {
                    ready: true
                },
                hide: {
                    event: 'unfocus'
                },
                style: {
                    classes: 'qtip-light qtip-rounded qtip-shadow'
                }
            });
        });
    }
    $(document).ready(function () {
        $("#fillAndValidate").on("click", fillAndValidate);
        $(".activateHelpLink").on("click", activateHelp);
    });
</script>
</body>
</html>